<% if @monitored %>
  $('topics_list').update("<%= escape_javascript(render(:partial => 'topics_list', :object => @monitored_topics, :as => :topics))%>");
<% else %>
  $('topics_list').update("<%= escape_javascript(render(:partial => 'topics_list', :object => @topics, :as => :topics))%>");
<% end %>
history.replaceState(null, "<%= @forum.name %>", "<%= @forum.permalink %>.html<%= 
  p = []
  p << %{monitored=true} if @monitored
  p << %{page=} + params[:page] if params[:page]
  %{?} + p.join(%{&}) unless p.empty?
%>");